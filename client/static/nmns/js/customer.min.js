function loadCustomerData(t){console.log(t)}function initCustomerModal(t){loadCustomerData(NMNS.customerList[Number(t.parent().data("index"))])}function drawCustomerList(){var s=$("#mainCustomerList");s.children(".card").remove(),s.hasClass("ps")||s.data("scroll",new PerfectScrollbar(s[0]));var o="";NMNS.customerList&&0<NMNS.customerList.length&&(NMNS.customerList.forEach(function(t,a){o+='<div class="card row col-12 col-sm-10" data-index="'+a+'"><div class="card-body"><h5 class="card-title">'+(t.name&&""!==t.name?t.name:"(이름없음)")+(t.contact&&""!==t.contact?'&nbsp;<a href="tel:'+t.contact+'"><small class="card-subtitle text-muted">'+dashContact(t.contact)+"</small></a>":"")+'</h5><div class="col-12 row px-0"><div class="col-4 border-right"><small class="text-muted">담당자</small><br/>'+(t.history&&0<t.history.length?'<span class="tui-full-calendar-icon tui-full-calendar-calendar-dot" style="background-color:'+t.history[0].managerColor+'"></span><span> '+t.history[0].managerName+"</span>":"")+'</div><div class="col-8"><small class="text-muted">메모</small><br/><span>'+(t.etc||"")+'</span></div></div></div><div class="cardLeftBorder" style="background-color:'+(t.history&&0<t.history.length?t.history[0].managerColor:"#b2dfdb")+'"></div><small class="customerSubInfo text-muted">'+(t.history&&0<t.history.length?"총 "+t.history.length+"회 방문":"")+(t.history&&0<t.history.length?" | 마지막 방문 "+moment(t.history[0].date,"YYYYMMDDHHmm").format("YYYY-MM-DD"):"")+'</small><a class="w-100 h-100 position-absolute customerModalLink" href="#" data-toggle="modal" data-target="#customerModal"></a></div></div>',0<a&&a%50==0&&(s.append(o),o="")}),s.append(o),s.data("scroll").update(),s.find(".customerModalLink").off("touch click").on("touch click",function(t){t.preventDefault(),initCustomerModal($(this))}),$("#customerCount").text(NMNS.customerList.length))}NMNS.socket.on("get customer list",socketResponse("고객 조회",function(t){NMNS.customerList=t.data,drawCustomerList(),console.log(t)}));