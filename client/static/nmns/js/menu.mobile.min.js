!function(){$("#mainContents").append('<div id="menuDetailMenu" class="switchingMenu menuDetailMenu">        <div class="menuContents px-3">          <form id="menuForm" class="mb-1 col-12 px-0 hasBottomArea" style="padding-top:35px">            <div class="form-group mb-0">              <div>메뉴 이름</div>              <input id="menuFormName" type="text" placeholder="메뉴 이름을 입력해주세요." class="form-control form-control-sm mt-3"/>              <div style="margin-top:35px">카드 가격</div>              <input id="menuFormPriceCard" type="text" placeholder="카드 가격을 입력해주세요." class="form-control form-control-sm mt-3 mb-2 montserrat inputmask-integer"/>              <div style="margin-top:35px">현금 가격</div>              <input id="menuFormPriceCash" type="text" placeholder="현금 가격을 입력해주세요." class="form-control form-control-sm mt-3 mb-2 montserrat inputmask-integer"/>              <div style="margin-top:35px">멤버십 가격</div>              <input id="menuFormPriceMembership" type="text" placeholder="멤버십 가격을 입력해주세요." class="form-control form-control-sm mt-3 mb-2 montserrat inputmask-integer"/>            </div>          </form>          <div class="row mx-0 col-12 mt-5 bottomButtonArea" style="padding:20px">            <button type="button" class="btn btn-white col mr-1" id="menuFormDeleteBtn">삭제</button>            <button type="button" class="btn btn-accent col ml-1" id="menuFormBtn">저장</button>          </div>        </div>      </div>'),Inputmask("integer",{autoGroup:!0,groupSeparator:",",groupSize:3,rightAlign:!1,allowMinus:!1,allowPlus:!1}).mask("#menuDetailMenu .inputmask-integer"),$("#menuFormBtn").on("touch click",function(){if(""!==$("#menuFormName").val()){var e=$("#menuForm").data("origin");if(e){NMNS.history.push({id:e.id,name:e.name,priceCash:e.priceCash,priceCard:e.priceCard,priceMembership:e.priceMembership});var i={id:e.id,name:$("#menuFormName").val(),priceCash:""===$("#menuFormPriceCash").val().replace(/,/gi,"")?null:1*$("#menuFormPriceCash").val().replace(/,/gi,""),priceCard:""===$("#menuFormPriceCard").val().replace(/,/gi,"")?null:1*$("#menuFormPriceCard").val().replace(/,/gi,""),priceMembership:""===$("#menuFormPriceMembership").val().replace(/,/gi,"")?null:1*$("#menuFormPriceMembership").val().replace(/,/gi,"")};NMNS.socket.emit("update menu",i),(e=NMNS.menuList.find(function(e){return e.id===i.id})).name=i.name,e.priceCash=i.priceCash,e.priceCard=i.priceCard,e.priceMembership=i.priceMembership}NMNS.drawMenuList(!0),history.back()}else showSnackBar("메뉴 이름을 입력해주세요.")}),$("#menuFormDeleteBtn").on("touch click",function(e){if(e.stopPropagation(),confirm("정말 이 메뉴 항목을 삭제하시겠어요?")){var i=$("#menuForm").data("origin"),n=$("#menuForm").data("index");$("#mainMenuList .menuRow[data-index='"+n+"']").data("action","delete").hide(),i&&(NMNS.history.push($.extend({index:n},i)),NMNS.socket.emit("delete menu",{id:i.id}),NMNS.menuList.remove(i.id,function(e,i){return e.id===i}),NMNS.drawMenuList(!0)),history.back()}});var r=0;function a(e,i){for(var n,t="",r=e;r<i;r++)t+='<div class="menuRow col-6" data-index="'+r+'"><div class="menuRowCover"><div class="col-12 px-0 menuRowHead">'+((n=NMNS.menuList[r]).name&&""!==n.name?n.name:"(이름없음)")+"</div>"+(null!==n.priceCard&&void 0!==n.priceCard?'<div class="col-6 px-0 menuSubHead">카드 가격</div><div class="col-6 px-0 montserrat menuPrice">'+(n.priceCard+"").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"</div>":"")+(null!==n.priceCash&&void 0!==n.priceCash?'<div class="col-6 px-0 menuSubHead">현금 가격</div><div class="col-6 px-0 montserrat menuPrice">'+(n.priceCash+"").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"</div>":"")+(null!==n.priceMembership&&void 0!==n.priceMembership?'<div class="col-6 px-0 menuSubHead">멤버십 가격</div><div class="col-6 px-0 montserrat menuPrice">'+(n.priceMembership+"").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"</div>":"")+"</div></div>";return t}NMNS.drawMenuList=function(e){var i,n=$("#mainMenuList"),t="";r||(r=0),NMNS.menuList&&e?(n.html(""),NMNS.menuList&&0<NMNS.menuList.length?t+=a(0,i=Math.min(0===r?r+Math.max(10,5+Math.ceil($("#mainMenuList").height()/140-$("#mainMenuList .menuRow").length/2)):r,NMNS.menuList.length)):t+="<p>아직 등록된 메뉴가 없습니다. 새로운 메뉴를 등록하여 고객의 매출내역을 기록, 관리해보세요!</p>"):NMNS.menuList&&(i=Math.min(r+Math.max(10,5+Math.ceil($("#mainMenuList").height()/140-$("#mainMenuList .menuRow").length/2)),NMNS.menuList.length),t+=a(r,i)),r=i,n.append($(t).on("touch click",function(e){e.preventDefault(),e.stopPropagation(),function(e){$("#menuForm").data("origin",e),$("#menuFormName").val(e.name),$("#menuFormPriceCard").val(e.priceCard),$("#menuFormPriceCash").val(e.priceCash),$("#menuFormPriceMembership").val(e.priceMembership)}(NMNS.menuList[1*$(this).data("index")]),$("#menuForm").data("index",1*$(this).data("index")),$(".menuDetailLink").trigger("click")}))},NMNS.socket.on("update menu",socketResponse("메뉴 항목 수정",function(e){NMNS.history.remove(e.data.id,findById),$("#scheduleTabContentList").html(NMNS.generateMenuList(NMNS.menuList))},function(i){var e=NMNS.history.find(function(e){return e.id===i.data.id}),n=NMNS.menuList.findIndex(function(e){return e.id===i.data.id});Number.isInteger(n)&&-1<n&&(NMNS.menuList[n].priceCard=e.priceCard,NMNS.menuList[n].priceCash=e.priceCash,NMNS.menuList[n].name=e.name,NMNS.menuList[n].priceMembership=e.priceMembership,NMNS.history.remove(i.data.id,findById),NMNS.drawMenuList(!0))})),NMNS.socket.on("delete menu",socketResponse("메뉴 항목 삭제",function(e){NMNS.history.remove(e.data.id,findById),$("#scheduleTabContentList").html(NMNS.generateMenuList(NMNS.menuList))},function(i){var e=NMNS.history.find(function(e){return e.id===i.data.id});NMNS.menuList.splice(e.index,e),NMNS.drawMenuList(!0),NMNS.history.remove(i.data.id,findById)})),NMNS.drawMenuList(!0);var e=!1;$(document).on("scroll",debounce(function(){$("#mainMenuList").is(":visible")&&!e&&NMNS.menuList&&r<NMNS.menuList.length&&Math.max(document.body.scrollHeight-window.innerHeight-window.scrollY,0)<Math.max(100,.2*window.innerHeight)&&(e=!0,$("#mainMenuLoading").show(),NMNS.drawMenuList(),$("#mainMenuLoading").hide(),e=!1)},100))}();