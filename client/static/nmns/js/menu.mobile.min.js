!function(){$("#mainContents").append('<div id="menuDetailMenu" class="switchingMenu menuDetailMenu">        <div class="menuContents px-3">          <form id="menuForm" class="mb-1 col-12 px-0 hasBottomArea" style="padding-top:35px">            <div class="form-group mb-0">              <div>메뉴 이름</div>              <input id="menuFormName" type="text" placeholder="메뉴 이름을 입력해주세요." class="form-control form-control-sm mt-3"/>              <div style="margin-top:35px">카드 가격</div>              <input id="menuFormPriceCard" type="text" placeholder="카드 가격을 입력해주세요." class="form-control form-control-sm mt-3 mb-2 montserrat inputmask-integer"/>              <div style="margin-top:35px">현금 가격</div>              <input id="menuFormPriceCash" type="text" placeholder="현금 가격을 입력해주세요." class="form-control form-control-sm mt-3 mb-2 montserrat inputmask-integer"/>              <div style="margin-top:35px">멤버십 가격</div>              <input id="menuFormPriceMembership" type="text" placeholder="멤버십 가격을 입력해주세요." class="form-control form-control-sm mt-3 mb-2 montserrat inputmask-integer"/>            </div>          </form>          <div class="row mx-0 col-12 mt-5 bottomButtonArea" style="padding:20px">            <button type="button" class="btn btn-white col mr-1" id="menuFormDeleteBtn">삭제</button>            <button type="button" class="btn btn-accent col ml-1" id="menuFormBtn">저장</button>          </div>        </div>      </div>'),Inputmask("integer",{autoGroup:!0,groupSeparator:",",groupSize:3,rightAlign:!1,allowMinus:!1,allowPlus:!1}).mask("#menuDetailMenu .inputmask-integer"),$("#menuFormBtn").on("touch click",function(){if(""!==$("#menuFormName").val()){var e=$("#menuForm").data("origin");if(e){NMNS.history.push({id:e.id,name:e.name,priceCash:e.priceCash,priceCard:e.priceCard,priceMembership:e.priceMembership});var i={id:e.id,name:$("#menuFormName").val(),priceCash:""===$("#menuFormPriceCash").val().replace(/,/gi,"")?null:1*$("#menuFormPriceCash").val().replace(/,/gi,""),priceCard:""===$("#menuFormPriceCard").val().replace(/,/gi,"")?null:1*$("#menuFormPriceCard").val().replace(/,/gi,""),priceMembership:""===$("#menuFormPriceMembership").val().replace(/,/gi,"")?null:1*$("#menuFormPriceMembership").val().replace(/,/gi,"")};NMNS.socket.emit("update menu",i),(e=NMNS.menuList.find(function(e){return e.id===i.id})).name=i.name,e.priceCash=i.priceCash,e.priceCard=i.priceCard,e.priceMembership=i.priceMembership}NMNS.drawMenuList(!0),history.back()}else showSnackBar("메뉴 이름을 입력해주세요.")}),$("#menuFormDeleteBtn").on("touch click",function(e){if(e.stopPropagation(),confirm("정말 이 메뉴 항목을 삭제하시겠어요?")){var i=$("#menuForm").data("origin"),r=$("#menuForm").data("index");$("#mainMenuList .menuRow[data-index='"+r+"']").data("action","delete").hide(),i&&(NMNS.history.push($.extend({index:r},i)),NMNS.socket.emit("delete menu",{id:i.id}),NMNS.menuList.remove(i.id,function(e,i){return e.id===i}),NMNS.drawMenuList(!0)),history.back()}});var a=0;function t(e,i){for(var r,n="",a=e;a<i;a++)n+='<div class="menuRow col-6" data-index="'+a+'"><div class="menuRowCover"><div class="col-12 px-0 menuRowHead">'+((r=NMNS.menuList[a]).name&&""!==r.name?r.name:"(이름없음)")+"</div>"+(null!==r.priceCard&&void 0!==r.priceCard?'<div class="col-6 px-0 menuSubHead">카드 가격</div><div class="col-6 px-0 montserrat menuPrice">'+(r.priceCard+"").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"</div>":"")+(null!==r.priceCash&&void 0!==r.priceCash?'<div class="col-6 px-0 menuSubHead">현금 가격</div><div class="col-6 px-0 montserrat menuPrice">'+(r.priceCash+"").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"</div>":"")+(null!==r.priceMembership&&void 0!==r.priceMembership?'<div class="col-6 px-0 menuSubHead">멤버십 가격</div><div class="col-6 px-0 montserrat menuPrice">'+(r.priceMembership+"").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"</div>":"")+"</div></div>";return n}NMNS.drawMenuList=function(e){var i,r=$("#mainMenuList"),n="";NMNS.menuList&&e?(r.html(""),NMNS.menuList&&0<NMNS.menuList.length?n+=t(0,i=Math.min(0===a?a+Math.max(10,5+Math.ceil($("#mainMenuList").height()/140-$("#mainMenuList .menuRow").length/2)):a,NMNS.menuList.length)):n+="<p>아직 등록된 메뉴가 없습니다. 새로운 메뉴를 등록하여 고객의 매출내역을 기록, 관리해보세요!</p>"):NMNS.menuList&&(i=Math.min(a+Math.max(10,5+Math.ceil($("#mainMenuList").height()/140-$("#mainMenuList .menuRow").length/2)),NMNS.menuList.length),n+=t(a,i)),a=i,r.append($(n).on("touch click",function(e){e.preventDefault(),e.stopPropagation(),function(e){$("#menuForm").data("origin",e),$("#menuFormName").val(e.name),$("#menuFormPriceCard").val(e.priceCard),$("#menuFormPriceCash").val(e.priceCash),$("#menuFormPriceMembership").val(e.priceMembership)}(NMNS.menuList[1*$(this).data("index")]),$("#menuForm").data("index",1*$(this).data("index")),$(".menuDetailLink").trigger("click")}))},NMNS.socket.on("update menu",socketResponse("메뉴 항목 수정",function(e){NMNS.history.remove(e.data.id,findById)},function(i){var e=NMNS.history.find(function(e){return e.id===i.data.id}),r=NMNS.menuList.findIndex(function(e){return e.id===i.data.id});Number.isInteger(r)&&-1<r&&(NMNS.menuList[r].priceCard=e.priceCard,NMNS.menuList[r].priceCash=e.priceCash,NMNS.menuList[r].name=e.name,NMNS.menuList[r].priceMembership=e.priceMembership,NMNS.history.remove(i.data.id,findById),NMNS.drawMenuList(!0))})),NMNS.socket.on("delete menu",socketResponse("메뉴 항목 삭제",function(e){NMNS.history.remove(e.data.id,findById)},function(i){var e=NMNS.history.find(function(e){return e.id===i.data.id});NMNS.menuList.splice(e.index,e),NMNS.drawMenuList(!0),NMNS.history.remove(i.data.id,findById)})),NMNS.menuList=[{id:1,name:"매니큐어",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:121,name:"매니큐어",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:441,name:"매니큐어",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:91,name:"매니큐어",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:81,name:"매니큐어",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:17,name:"매니큐어",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:61,name:"매니큐어",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:51,name:"매니큐어",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:41,name:"매니큐어",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:31,name:"매니큐어",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:21,name:"매니큐어",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:11,name:"매니큐어",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:1,name:"매니큐어",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:2,name:"매니큐어2",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:3,name:"매니큐어3",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:4,name:"매니큐어4",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:5,name:"매니큐어5",priceCash:1e4,priceCard:2e4,priceMembership:1e4},{id:6,name:"매니큐어6",priceCash:1e4,priceCard:2e4,priceMembership:1e4}],NMNS.drawMenuList(!0);var e=!1;$(document).on("scroll",debounce(function(){$("#mainMenuList").is(":visible")&&!e&&NMNS.menuList&&a<NMNS.menuList.length&&Math.max(document.body.scrollHeight-window.innerHeight-window.scrollY,0)<Math.max(100,.2*window.innerHeight)&&(e=!0,$("#mainMenuLoading").show(),NMNS.drawMenuList(),$("#mainMenuLoading").hide(),e=!1)},100))}();